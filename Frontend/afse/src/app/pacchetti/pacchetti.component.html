<div class="container py-4">
  <div class="row" *ngIf="packs.length > 0; else noPack">
    <div class="col-6 col-md-4 col-lg-3 mb-3" *ngFor="let p of packs; let i = index">
      <div class="pack-card position-relative"
          [class.opening]="opening && openingIndex===i"
           (mousemove)="onMouseMove($event, i)"
           (mouseenter)="onMouseEnter(i)"
           (mouseleave)="onMouseLeave(i)"
           (click)="openPack(i)"
           [style.transform]="cardTransforms[i] || 'perspective(600px)'">
            <img src="assets/pachetto.png" class="img-fluid" alt="pack">
         <span class="badge bg-success quantity-badge">{{ p.quantity }}</span>
        </div>
    </div>
</div>
  <ng-template #noPack>
    <p class="text-center">Nessun pacchetto disponibile.</p>
  </ng-template>
  <div class="mt-4 opened-area" *ngIf="openedCards.length > 0">
    <div class="row opened-cards row-cols-4 row-cols-md-5 g-4 justify-content-center">
      <div class="col" *ngFor="let c of openedCards">
        <div class="card card-item h-100 text-center border-danger">
          <img [src]="c.image" class="card-img-top hero-img" alt="hero">
          <div class="card-body p-2">
            <h6 class="card-title mb-1">{{ c.name }}</h6>
            <p class="mb-2"><small>{{ c.publisher || 'unknown' }}</small></p>
            <ng-container *ngFor="let stat of statKeys">
              <div class="mb-1">
                <div class="d-flex align-items-center">
                  <small class="me-2 text-capitalize stat-label">{{ stat }}</small>
                  <div class="progress position-relative flex-grow-1" style="height: 0.75rem;">
                    <div class="progress-bar" role="progressbar"
                         [ngClass]="{'bg-secondary': !statValue(c.powerstats[stat])}"
                         [style.width.%]="statValue(c.powerstats[stat]) || 100"
                         [style.backgroundColor]="statValue(c.powerstats[stat]) ? statColor(stat) : ''">
                    </div>
                    <small class="position-absolute top-0 end-0 me-1" style="font-size: 0.65rem;">
                      {{ statValue(c.powerstats[stat]) ?? 'unknown' }}
                    </small>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center mt-2">
      <button class="btn btn-success" (click)="insertIntoAlbum()">Inserisci nell'album</button>
    </div>
  </div>  
<!--
<div class="mt-4 opened-area" *ngIf="openedCards.length > 0">
    <ngb-carousel class="opened-carousel" [interval]="carouselInterval" [showNavigationArrows]="true" [showNavigationIndicators]="true">
      <ng-template ngbSlide *ngFor="let c of openedCards">
        <div class="card card-item mx-auto" style="width: 18rem;">
          <img [src]="c.image" class="card-img-top" alt="hero">
          <div class="card-body p-2">
            <h6 class="card-title mb-0">{{ c.name }}</h6>
          </div>
        </div>
      </ng-template>
    </ngb-carousel>
    <div class="text-center mt-2">
      <button class="btn btn-success" (click)="insertIntoAlbum()">Inserisci nel album</button>
    </div>
  </div>
-->
</div>
